{% extends 'layout.html' %}
{% block body %}
  <div class="page-header">
    <h1>Download Report: {{report.name }}</h1>
  </div>

  <div class="col-md-6">
    <form method="POST" action="{{ url_for('reports.download_report', report_id=report.id) }}" class="form-horizontal">
      {{ form.csrf_token }}
      <div class="form-group">
        {{ form.start_date.label(class='control-label col-sm-2') }}
        <div class="col-sm-10">
          {{ form.start_date(class='form-control normal datepicker', type='text', placeholder='Click here to choose date') }}
        </div>
      </div>
      <div class="form-group">
        {{ form.end_date.label(class='control-label col-sm-2') }}
        <div class="col-sm-10">
          {{ form.end_date(class='form-control normal datepicker', type='text', placeholder='Click here to choose date') }}
        </div>
      </div>

      <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
          <a class="btn btn-danger" href="{{ url_for('reports.my_reports') }}">Back to Reports</a>
          <button onclick="javascript:displayWarningAndSubmit()" type="submit" class="btn btn-primary pull-right">Download Excel Data</button>
        </div>
      </div>
    </form>
    <div id="download_alert" class="alert alert-success fade in" style="display: none;">
        <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
        <span class="glyphicon glyphicon-exclamation-sign"></span>
        Your Excel sheet is being prepared!<br>
        This may take a while, so sit tight and keep this page open!
    </div>
  </div>

  <script>
    function displayWarningAndSubmit() {
        $("#download_alert").fadeIn();
    }
  </script>

{% endblock %}
